/*
 * Connect - timeout
 * Ported from https://github.com/LearnBoost/connect-timeout
 * MIT Licensed
 */
var debug=require("debug")("connect:timeout");module.exports=function timeout(a){a=a||5000;return function(e,b,c){var f=setTimeout(function(){e.emit("timeout",a)},a);e.on("timeout",function(){if(b.headersSent){return debug("response started, cannot timeout")}var g=new Error("Response timeout");g.timeout=a;g.status=503;c(g)});e.clearTimeout=function(){clearTimeout(f)};var d=b.writeHead;b.writeHead=function(){clearTimeout(f);d.apply(b,arguments)};c()}};