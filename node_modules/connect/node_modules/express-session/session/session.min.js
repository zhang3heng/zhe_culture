/*
 * Connect - session - Session
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 */
var merge=require("utils-merge");var Session=module.exports=function Session(a,b){Object.defineProperty(this,"req",{value:a});Object.defineProperty(this,"id",{value:a.sessionID});if("object"==typeof b){merge(this,b)}};Session.prototype.touch=function(){return this.resetMaxAge()};Session.prototype.resetMaxAge=function(){this.cookie.maxAge=this.cookie.originalMaxAge;return this};Session.prototype.save=function(a){this.req.sessionStore.set(this.id,this,a||function(){});return this};Session.prototype.reload=function(b){var c=this.req,a=this.req.sessionStore;a.get(this.id,function(e,d){if(e){return b(e)}if(!d){return b(new Error("failed to load session"))}a.createSession(c,d);b()});return this};Session.prototype.destroy=function(a){delete this.req.session;this.req.sessionStore.destroy(this.id,a);return this};Session.prototype.regenerate=function(a){this.req.sessionStore.regenerate(this.req,a);return this};