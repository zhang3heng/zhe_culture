var assert=require("assert");var http=require("http");var net=require("net");var multiparty=require("../../");var server=http.createServer(function(d,a){var c=new multiparty.Form();var b=false;c.on("aborted",function(){b=true});c.on("error",function(){assert(b,"Error event should follow aborted");server.close()});c.on("end",function(){throw new Error('Unexpected "end" event')});c.parse(d)}).listen(0,"localhost",function(){var a=net.connect(server.address().port);a.write("POST / HTTP/1.1\r\nContent-Length: 70\r\nContent-Type: multipart/form-data; boundary=foo\r\n\r\n");a.end()});