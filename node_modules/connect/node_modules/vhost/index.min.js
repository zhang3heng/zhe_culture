/*
 * Connect - vhost
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 */
module.exports=function vhost(a,c){if(!a){throw new Error("vhost hostname required")}if(!c){throw new Error("vhost server required")}var b=new RegExp("^"+a.replace(/[^*\w]/g,"\\$&").replace(/[*]/g,"(?:.*?)")+"$","i");if(c.onvhost){c.onvhost(a)}return function d(h,e,f){if(!h.headers.host){return f()}var g=h.headers.host.split(":")[0];if(!b.test(g)){return f()}if("function"==typeof c){return c(h,e,f)}c.emit("request",h,e)}};