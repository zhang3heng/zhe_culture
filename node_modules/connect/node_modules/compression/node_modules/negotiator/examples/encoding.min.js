(function(){var c,a,b,d;c=require("../lib/negotiator").Negotiator;b=require("http");a=require("gzip-buffer");d={identity:"Hello World"};a.gzip(d.identity,function(e){var g,f,h,i;d.gzip=e;g=(function(){var j;j=[];for(f in d){i=d[f];j.push(f)}return j})();console.log(g);h=b.createServer(function(l,j){var k,m;m=new c(l);console.log("Accept-Encoding: "+l.headers["accept-encoding"]);console.log("Preferred: "+(m.preferredEncodings()));console.log("Possible: "+(m.preferredEncodings(g)));k=m.preferredEncoding(g);console.log("Selected: "+k);if(k){j.writeHead(200,{"Content-Encoding":k});return j.end(d[k])}else{j.writeHead(406);return j.end()}});return h.listen(8080)})}).call(this);