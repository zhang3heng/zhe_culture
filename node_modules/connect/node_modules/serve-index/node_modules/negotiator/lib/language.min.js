module.exports=preferredLanguages;preferredLanguages.preferredLanguages=preferredLanguages;function parseAcceptLanguage(a){return a.split(",").map(function(b){return parseLanguage(b.trim())}).filter(function(b){return b})}function parseLanguage(j){var e=j.match(/^\s*(\S+?)(?:-(\S+?))?\s*(?:;(.*))?$/);if(!e){return null}var f=e[1],h=e[2],g=f;if(h){g+="-"+h}var a=1;if(e[3]){var c=e[3].split(";");for(var d=0;d<c.length;d++){var b=c[d].split("=");if(b[0]==="q"){a=parseFloat(b[1])}}}return{prefix:f,suffix:h,q:a,full:g}}function getLanguagePriority(b,a){return(a.map(function(c){return specify(b,c)}).filter(function(c){return c}).sort(function(d,c){return d.s>c.s?-1:1})[0]||{q:0}).q}function specify(d,a){var c=parseLanguage(d);var b=0;if(a.full===c.full){b|=4}else{if(a.prefix===c.full){b|=2}else{if(a.full===c.prefix){b|=1}else{if(a.full!=="*"){return null}}}}return{s:b,q:a.q,}}function preferredLanguages(c,a){c=parseAcceptLanguage(c||"");if(a){var b=a.map(function(d){return[d,getLanguagePriority(d,c)]}).filter(function(d){return d[1]>0}).sort(function(e,d){return e[1]===d[1]?0:e[1]>d[1]?-1:1}).map(function(d){return d[0]});return b}else{return c.sort(function(e,d){return e.q<d.q?1:-1}).filter(function(d){return d.q>0}).map(function(d){return d.full})}};