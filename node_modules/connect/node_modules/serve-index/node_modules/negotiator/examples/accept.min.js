(function(){var c,e,a,b,d,f,g;c=require("../lib/negotiator").Negotiator;a=require("http");d={"text/html":"<h1>Hello world!</h1>","text/plain":"Hello World!","application/json":JSON.stringify({hello:"world!"})};e=(function(){var h;h=[];for(b in d){g=d[b];h.push(b)}return h})();f=a.createServer(function(j,i){var h,k;k=new c(j);console.log("Accept: "+j.headers.accept);console.log("Preferred: "+(k.mediaTypes()));console.log("Possible: "+(k.mediaTypes(e)));h=k.mediaType(e);console.log("Selected: "+h);if(h){i.writeHead(200,{"Content-Type":h});return i.end(d[h])}else{i.writeHead(406);return i.end()}});f.listen(8080)}).call(this);