/*
 * Connect
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 */
var EventEmitter=require("events").EventEmitter,proto=require("./proto"),utils=require("./utils"),path=require("path"),basename=path.basename,fs=require("fs");require("./patch");exports=module.exports=createServer;exports.version="2.7.11";exports.mime=require("./middleware/static").mime;exports.proto=proto;exports.middleware={};exports.utils=utils;function createServer(){function b(e,c,d){b.handle(e,c,d)}utils.merge(b,proto);utils.merge(b,EventEmitter.prototype);b.route="/";b.stack=[];for(var a=0;a<arguments.length;++a){b.use(arguments[a])}return b}createServer.createServer=createServer;fs.readdirSync(__dirname+"/middleware").forEach(function(a){if(!/\.js$/.test(a)){return}var b=basename(a,".js");function c(){return require("./middleware/"+b)}exports.middleware.__defineGetter__(b,c);exports.__defineGetter__(b,c)});