var mime=require("send").mime;var crc32=require("buffer-crc32");exports.etag=function(a){return'"'+crc32.signed(a)+'"'};exports.isAbsolute=function(a){if("/"==a[0]){return true}if(":"==a[1]&&"\\"==a[2]){return true}if("\\\\"==a.substring(0,2)){return true}};exports.flatten=function(b,c){c=c||[];var a=b.length;for(var d=0;d<a;++d){if(Array.isArray(b[d])){exports.flatten(b[d],c)}else{c.push(b[d])}}return c};exports.normalizeType=function(a){return ~a.indexOf("/")?acceptParams(a):{value:mime.lookup(a),params:{}}};exports.normalizeTypes=function(c){var a=[];for(var b=0;b<c.length;++b){a.push(exports.normalizeType(c[b]))}return a};function acceptParams(f,b){var e=f.split(/ *; */);var a={value:e[0],quality:1,params:{},originalIndex:b};for(var c=1;c<e.length;++c){var d=e[c].split(/ *= */);if("q"==d[0]){a.quality=parseFloat(d[1])}else{a.params[d[0]]=d[1]}}return a};