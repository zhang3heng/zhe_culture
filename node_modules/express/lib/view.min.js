var path=require("path");var fs=require("fs");var utils=require("./utils");var dirname=path.dirname;var basename=path.basename;var extname=path.extname;var exists=fs.existsSync||path.existsSync;var join=path.join;module.exports=View;function View(b,a){a=a||{};this.name=b;this.root=a.root;var d=a.engines;this.defaultEngine=a.defaultEngine;var c=this.ext=extname(b);if(!c&&!this.defaultEngine){throw new Error("No default engine was specified and no extension was provided.")}if(!c){b+=(c=this.ext=("."!=this.defaultEngine[0]?".":"")+this.defaultEngine)}this.engine=d[c]||(d[c]=require(c.slice(1)).__express);this.path=this.lookup(b)}View.prototype.lookup=function(b){var a=this.ext;if(!utils.isAbsolute(b)){b=join(this.root,b)}if(exists(b)){return b}b=join(dirname(b),basename(b,a),"index"+a);if(exists(b)){return b}};View.prototype.render=function(a,b){this.engine(this.path,a,b)};