var mime=require("mime");module.exports=function(e,c){var f=e.headers;if(!(parseInt(f["content-length"],10)||"transfer-encoding" in f)){return}var b=f["content-type"];if(!b){return false}b=b.split(";")[0];if(!c||!c.length){return b}var d;for(var a=0;a<c.length;a++){if(mimeMatch(normalize(d=c[a]),b)){return ~d.indexOf("*")?b:d}}return false};function normalize(a){switch(a){case"urlencoded":return"application/x-www-form-urlencoded"}return ~a.indexOf("/")?a:mime.lookup(a)}function mimeMatch(a,b){if(a==b){return true}if(!~a.indexOf("*")){return false}b=b.split("/");a=a.split("/");if("*"==a[0]&&a[1]==b[1]){return true}if("*"==a[1]&&a[0]==b[0]){return true}};