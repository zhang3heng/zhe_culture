(function(){var f,g,b,a,j,h,i,k,e,d,c;b=require("../lib/negotiator").Negotiator;j=require("http");f=require("buffer").Buffer;g=require("iconv").Iconv;h=new g("UTF-8","ISO-8859-1");k="Ã«";e={"utf-8":k,"iso-8859-1":h.convert(new f(k))};a=(function(){var l;l=[];for(i in e){c=e[i];l.push(i)}return l})();d=j.createServer(function(m,l){var o,n;n=new b(m);console.log("Accept-Charset: "+m.headers["accept-charset"]);console.log("Preferred: "+(n.preferredCharsets()));console.log("Possible: "+(n.preferredCharsets(a)));o=n.preferredCharset(a);console.log("Selected: "+o);if(o){l.writeHead(200,{"Content-Type":"text/html; charset="+o});return l.end(e[o])}else{l.writeHead(406);return l.end()}});d.listen(8080)}).call(this);